var app=function(){"use strict";function t(){}const e=t=>t;function n(t,e){for(const n in e)t[n]=e[n];return t}function i(t){return t()}function o(){return Object.create(null)}function s(t){t.forEach(i)}function r(t){return"function"==typeof t}function l(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function c(e,...n){if(null==e)return t;const i=e.subscribe(...n);return i.unsubscribe?()=>i.unsubscribe():i}function a(t){let e;return c(t,t=>e=t)(),e}function u(t,e,n){t.$$.on_destroy.push(c(e,n))}function h(t,e,n,i){if(t){const o=d(t,e,n,i);return t[0](o)}}function d(t,e,i,o){return t[1]&&o?n(i.ctx.slice(),t[1](o(e))):i.ctx}function f(t,e,n,i,o,s,r){const l=function(t,e,n,i){if(t[2]&&i){const o=t[2](i(n));if(void 0===e.dirty)return o;if("object"==typeof o){const t=[],n=Math.max(e.dirty.length,o.length);for(let i=0;i<n;i+=1)t[i]=e.dirty[i]|o[i];return t}return e.dirty|o}return e.dirty}(e,i,o,s);if(l){const o=d(e,n,i,r);t.p(o,l)}}function m(t){const e={};for(const n in t)"$"!==n[0]&&(e[n]=t[n]);return e}function p(t,e,n=e){return t.set(n),e}const g="undefined"!=typeof window;let w=g?()=>window.performance.now():()=>Date.now(),$=g?t=>requestAnimationFrame(t):t;const v=new Set;function b(t){v.forEach(e=>{e.c(t)||(v.delete(e),e.f())}),0!==v.size&&$(b)}function I(t){let e;return 0===v.size&&$(b),{promise:new Promise(n=>{v.add(e={c:t,f:n})}),abort(){v.delete(e)}}}function y(t,e){t.appendChild(e)}function x(t,e,n){t.insertBefore(e,n||null)}function C(t){t.parentNode.removeChild(t)}function T(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function _(t){return document.createElement(t)}function S(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function L(t){return document.createTextNode(t)}function k(){return L(" ")}function D(){return L("")}function M(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function B(t){return function(e){e.target===this&&t.call(this,e)}}function A(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function E(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function N(t,e){t.value=null==e?"":e}function H(t,e,n,i){t.style.setProperty(e,n,i?"important":"")}function R(t,e,n){t.classList[n?"add":"remove"](e)}function F(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}const O=new Set;let W,P=0;function j(t,e,n,i,o,s,r,l=0){const c=16.666/i;let a="{\n";for(let t=0;t<=1;t+=c){const i=e+(n-e)*s(t);a+=100*t+`%{${r(i,1-i)}}\n`}const u=a+`100% {${r(n,1-n)}}\n}`,h=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(u)}_${l}`,d=t.ownerDocument;O.add(d);const f=d.__svelte_stylesheet||(d.__svelte_stylesheet=d.head.appendChild(_("style")).sheet),m=d.__svelte_rules||(d.__svelte_rules={});m[h]||(m[h]=!0,f.insertRule(`@keyframes ${h} ${u}`,f.cssRules.length));const p=t.style.animation||"";return t.style.animation=`${p?p+", ":""}${h} ${i}ms linear ${o}ms 1 both`,P+=1,h}function U(t,e){const n=(t.style.animation||"").split(", "),i=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),o=n.length-i.length;o&&(t.style.animation=i.join(", "),P-=o,P||$(()=>{P||(O.forEach(t=>{const e=t.__svelte_stylesheet;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.__svelte_rules={}}),O.clear())}))}function q(t){W=t}function G(){if(!W)throw new Error("Function called outside component initialization");return W}function Y(t){G().$$.on_mount.push(t)}function K(t){G().$$.on_destroy.push(t)}function z(){const t=G();return(e,n)=>{const i=t.$$.callbacks[e];if(i){const o=F(e,n);i.slice().forEach(e=>{e.call(t,o)})}}}const X=[],V=[],J=[],Q=[],Z=Promise.resolve();let tt=!1;function et(){tt||(tt=!0,Z.then(lt))}function nt(){return et(),Z}function it(t){J.push(t)}function ot(t){Q.push(t)}let st=!1;const rt=new Set;function lt(){if(!st){st=!0;do{for(let t=0;t<X.length;t+=1){const e=X[t];q(e),ct(e.$$)}for(q(null),X.length=0;V.length;)V.pop()();for(let t=0;t<J.length;t+=1){const e=J[t];rt.has(e)||(rt.add(e),e())}J.length=0}while(X.length);for(;Q.length;)Q.pop()();tt=!1,st=!1,rt.clear()}}function ct(t){if(null!==t.fragment){t.update(),s(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(it)}}let at;function ut(t,e,n){t.dispatchEvent(F(`${e?"intro":"outro"}${n}`))}const ht=new Set;let dt;function ft(){dt={r:0,c:[],p:dt}}function mt(){dt.r||s(dt.c),dt=dt.p}function pt(t,e){t&&t.i&&(ht.delete(t),t.i(e))}function gt(t,e,n,i){if(t&&t.o){if(ht.has(t))return;ht.add(t),dt.c.push(()=>{ht.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}}const wt={duration:0};function $t(n,i,o,l){let c=i(n,o),a=l?0:1,u=null,h=null,d=null;function f(){d&&U(n,d)}function m(t,e){const n=t.b-a;return e*=Math.abs(n),{a:a,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function p(i){const{delay:o=0,duration:r=300,easing:l=e,tick:p=t,css:g}=c||wt,$={start:w()+o,b:i};i||($.group=dt,dt.r+=1),u||h?h=$:(g&&(f(),d=j(n,a,i,r,o,l,g)),i&&p(0,1),u=m($,r),it(()=>ut(n,i,"start")),I(t=>{if(h&&t>h.start&&(u=m(h,r),h=null,ut(n,u.b,"start"),g&&(f(),d=j(n,a,u.b,u.duration,0,l,c.css))),u)if(t>=u.end)p(a=u.b,1-a),ut(n,u.b,"end"),h||(u.b?f():--u.group.r||s(u.group.c)),u=null;else if(t>=u.start){const e=t-u.start;a=u.a+u.d*l(e/u.duration),p(a,1-a)}return!(!u&&!h)}))}return{run(t){r(c)?(at||(at=Promise.resolve(),at.then(()=>{at=null})),at).then(()=>{c=c(),p(t)}):p(t)},end(){f(),u=h=null}}}const vt="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function bt(t,e){gt(t,1,1,()=>{e.delete(t.key)})}function It(t,e,n,i,o,s,r,l,c,a,u,h){let d=t.length,f=s.length,m=d;const p={};for(;m--;)p[t[m].key]=m;const g=[],w=new Map,$=new Map;for(m=f;m--;){const t=h(o,s,m),l=n(t);let c=r.get(l);c?i&&c.p(t,e):(c=a(l,t),c.c()),w.set(l,g[m]=c),l in p&&$.set(l,Math.abs(m-p[l]))}const v=new Set,b=new Set;function I(t){pt(t,1),t.m(l,u),r.set(t.key,t),u=t.first,f--}for(;d&&f;){const e=g[f-1],n=t[d-1],i=e.key,o=n.key;e===n?(u=e.first,d--,f--):w.has(o)?!r.has(i)||v.has(i)?I(e):b.has(o)?d--:$.get(i)>$.get(o)?(b.add(i),I(e)):(v.add(o),d--):(c(n,r),d--)}for(;d--;){const e=t[d];w.has(e.key)||c(e,r)}for(;f;)I(g[f-1]);return g}function yt(t,e){const n={},i={},o={$$scope:1};let s=t.length;for(;s--;){const r=t[s],l=e[s];if(l){for(const t in r)t in l||(i[t]=1);for(const t in l)o[t]||(n[t]=l[t],o[t]=1);t[s]=l}else for(const t in r)o[t]=1}for(const t in i)t in n||(n[t]=void 0);return n}function xt(t){return"object"==typeof t&&null!==t?t:{}}function Ct(t,e,n){const i=t.$$.props[e];void 0!==i&&(t.$$.bound[i]=n,n(t.$$.ctx[i]))}function Tt(t){t&&t.c()}function _t(t,e,n){const{fragment:o,on_mount:l,on_destroy:c,after_update:a}=t.$$;o&&o.m(e,n),it(()=>{const e=l.map(i).filter(r);c?c.push(...e):s(e),t.$$.on_mount=[]}),a.forEach(it)}function St(t,e){const n=t.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Lt(e,n,i,r,l,c,a=[-1]){const u=W;q(e);const h=n.props||{},d=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:l,bound:o(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:o(),dirty:a,skip_bound:!1};let f=!1;if(d.ctx=i?i(e,h,(t,n,...i)=>{const o=i.length?i[0]:n;return d.ctx&&l(d.ctx[t],d.ctx[t]=o)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](o),f&&function(t,e){-1===t.$$.dirty[0]&&(X.push(t),et(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(e,t)),n}):[],d.update(),f=!0,s(d.before_update),d.fragment=!!r&&r(d.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);d.fragment&&d.fragment.l(t),t.forEach(C)}else d.fragment&&d.fragment.c();n.intro&&pt(e.$$.fragment),_t(e,n.target,n.anchor),lt()}q(u)}class kt{$destroy(){St(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Dt=[];function Mt(e,n=t){let i;const o=[];function s(t){if(l(e,t)&&(e=t,i)){const t=!Dt.length;for(let t=0;t<o.length;t+=1){const n=o[t];n[1](),Dt.push(n,e)}if(t){for(let t=0;t<Dt.length;t+=2)Dt[t][0](Dt[t+1]);Dt.length=0}}}return{set:s,update:function(t){s(t(e))},subscribe:function(r,l=t){const c=[r,l];return o.push(c),1===o.length&&(i=n(s)||t),r(e),()=>{const t=o.indexOf(c);-1!==t&&o.splice(t,1),0===o.length&&(i(),i=null)}}}}class Bt{constructor(t){this.list=[],this.seList=[],t&&t(this.offAll.bind(this))}_findIndex(t,e,n){return this.list.findIndex(i=>i.domNode===t&&i.eventName===e&&i.callback==n)}on(t,e,n){return this._findIndex(t,e,n)>=0||(t.addEventListener(e,n),this.list.push({domNode:t,eventName:e,callback:n})),this}off(t,e,n){t.removeEventListener(e,n);const i=this._findIndex(t,e,n);return i>=0&&this.list.splice(i,1),this}offAll(){return this.list.map(t=>t.domNode.removeEventListener(t.eventName,t.callback)),this.list=[],this.seList.map(t=>t.offAll()),this}createChild(){const t=new Bt;return this.seList.push(t),t}}const At=(t,e)=>{let n=!0;const i=e=>{n&&(requestAnimationFrame(i),t(e))};requestAnimationFrame(i);const o=()=>n=!1;return e&&e(o),o},Et={emit(){}},Nt=()=>globalThis.g_MainEventsBus||Et,Ht=t=>{t.addEventListener("focus",()=>Nt().emit("input-focus",!0)),t.addEventListener("blur",()=>Nt().emit("input-focus",!1))};class Rt{constructor(t){this.key=t.replace(/\\/g,"/");const e=this.key.split("/").slice(0,-1).join("/");try{fs.mkdirSync(e,{recursive:!0})}catch(t){console.error(t)}this.writeStack=0}async set(t){if(this.writeValue=t,this.writeStack)return;this.writeStack++;let e=!1;for(;;){try{await fs.promises.writeFile(this.key,this.writeValue),e=!0}catch{}if(this.writeValue===t)break;t=this.writeValue}return this.writeStack--,e}get(){try{return fs.readFileSync(this.key,"utf-8")}catch{}}}let Ft;Ft="object"==typeof fs&&"function"==typeof fs.readFileSync?Rt:function(t){return{get:()=>localStorage[t],set:e=>localStorage[t]=e}};const Ot=new Map,Wt=t=>JSON.stringify(String(t)).split("").map(t=>t.charCodeAt().toString(16).padStart(4,0)).join("");function Pt(t){let e,n;return{c(){e=S("title"),n=L(t[0])},m(t,i){x(t,e,i),y(e,n)},p(t,e){1&e&&E(n,t[0])},d(t){t&&C(e)}}}function jt(t){let e,n,i,o=t[0]&&Pt(t);const s=t[3].default,r=h(s,t,t[2],null);return{c(){e=S("svg"),o&&o.c(),n=D(),r&&r.c(),A(e,"xmlns","http://www.w3.org/2000/svg"),A(e,"viewBox",t[1]),A(e,"class","svelte-c8tyih")},m(t,s){x(t,e,s),o&&o.m(e,null),y(e,n),r&&r.m(e,null),i=!0},p(t,[l]){t[0]?o?o.p(t,l):(o=Pt(t),o.c(),o.m(e,n)):o&&(o.d(1),o=null),r&&r.p&&4&l&&f(r,s,t,t[2],l,null,null),(!i||2&l)&&A(e,"viewBox",t[1])},i(t){i||(pt(r,t),i=!0)},o(t){gt(r,t),i=!1},d(t){t&&C(e),o&&o.d(),r&&r.d(t)}}}function Ut(t,e,n){let{$$slots:i={},$$scope:o}=e,{title:s=null}=e,{viewBox:r}=e;return t.$$set=t=>{"title"in t&&n(0,s=t.title),"viewBox"in t&&n(1,r=t.viewBox),"$$scope"in t&&n(2,o=t.$$scope)},[s,r,o,i]}class qt extends kt{constructor(t){super(),Lt(this,t,Ut,jt,l,{title:0,viewBox:1})}}function Gt(t){let e;return{c(){e=S("path"),A(e,"d","M278.6 256l68.2-68.2c6.2-6.2 6.2-16.4 0-22.6-6.2-6.2-16.4-6.2-22.6 0L256 233.4l-68.2-68.2c-6.2-6.2-16.4-6.2-22.6 0-3.1 3.1-4.7 7.2-4.7 11.3 0 4.1 1.6 8.2 4.7 11.3l68.2 68.2-68.2 68.2c-3.1 3.1-4.7 7.2-4.7 11.3 0 4.1 1.6 8.2 4.7 11.3 6.2 6.2 16.4 6.2 22.6 0l68.2-68.2 68.2 68.2c6.2 6.2 16.4 6.2 22.6 0 6.2-6.2 6.2-16.4 0-22.6L278.6 256z")},m(t,n){x(t,e,n)},d(t){t&&C(e)}}}function Yt(t){let e,i;const o=[{viewBox:"0 0 512 512"},t[0]];let s={$$slots:{default:[Gt]},$$scope:{ctx:t}};for(let t=0;t<o.length;t+=1)s=n(s,o[t]);return e=new qt({props:s}),{c(){Tt(e.$$.fragment)},m(t,n){_t(e,t,n),i=!0},p(t,[n]){const i=1&n?yt(o,[o[0],xt(t[0])]):{};2&n&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i(t){i||(pt(e.$$.fragment,t),i=!0)},o(t){gt(e.$$.fragment,t),i=!1},d(t){St(e,t)}}}function Kt(t,e,i){return t.$$set=t=>{i(0,e=n(n({},e),m(t)))},[e=m(e)]}class zt extends kt{constructor(t){super(),Lt(this,t,Kt,Yt,l,{})}}function Xt(t){let e;return{c(){e=S("path"),A(e,"d","M7 14l5-5 5 5z")},m(t,n){x(t,e,n)},d(t){t&&C(e)}}}function Vt(t){let e,i;const o=[{viewBox:"0 0 24 24"},t[0]];let s={$$slots:{default:[Xt]},$$scope:{ctx:t}};for(let t=0;t<o.length;t+=1)s=n(s,o[t]);return e=new qt({props:s}),{c(){Tt(e.$$.fragment)},m(t,n){_t(e,t,n),i=!0},p(t,[n]){const i=1&n?yt(o,[o[0],xt(t[0])]):{};2&n&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i(t){i||(pt(e.$$.fragment,t),i=!0)},o(t){gt(e.$$.fragment,t),i=!1},d(t){St(e,t)}}}function Jt(t,e,i){return t.$$set=t=>{i(0,e=n(n({},e),m(t)))},[e=m(e)]}class Qt extends kt{constructor(t){super(),Lt(this,t,Jt,Vt,l,{})}}function Zt(t){let e;return{c(){e=S("path"),A(e,"d","M7 10l5 5 5-5z")},m(t,n){x(t,e,n)},d(t){t&&C(e)}}}function te(t){let e,i;const o=[{viewBox:"0 0 24 24"},t[0]];let s={$$slots:{default:[Zt]},$$scope:{ctx:t}};for(let t=0;t<o.length;t+=1)s=n(s,o[t]);return e=new qt({props:s}),{c(){Tt(e.$$.fragment)},m(t,n){_t(e,t,n),i=!0},p(t,[n]){const i=1&n?yt(o,[o[0],xt(t[0])]):{};2&n&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i(t){i||(pt(e.$$.fragment,t),i=!0)},o(t){gt(e.$$.fragment,t),i=!1},d(t){St(e,t)}}}function ee(t,e,i){return t.$$set=t=>{i(0,e=n(n({},e),m(t)))},[e=m(e)]}class ne extends kt{constructor(t){super(),Lt(this,t,ee,te,l,{})}}const ie=new URL(location.href),oe=t=>{try{if(/getforge\.io/.test(new URL(location.href).host)){const e=[...document.querySelectorAll("meta")].find(t=>"forge-tag"===t.getAttribute("name")).getAttribute("value").split(":")[1];t=`https://cdn.getforge.com/${ie.hostname}/${e}/${t}`}}catch(t){}return t};const se=document;class re{constructor(t,e=64,n="webp"){this.path=t,this.wh=e,this.ext=n,this.cacheSpriteMap=new Map,this.cacheSectionMap=new Map}getSpriteToCtx2DSync(t,e,n,i,o,s,r=0,l=0){return this._getSpriteToCtx2DSync(l,r,s,t,e,n,i,o)}async getSpriteToCtx2D(t,e,n,i,o,s,r=0,l=0){return this._getSpriteToCtx2D(l,r,s,t,e,n,i,o)}async getSpriteToCanvasEx(t,e,n,i,o,s,r=0,l=0){return this.getSprite(s,r,l,t,e,n,i,o)}async getSpriteToCanvas(t,e,n=0,i=0){return this.getSprite(e,n,i,t)}async getSprite(t,e=0,n=0,i,o,s,r,l){const c=`${n}-${e}`;return this._getSprite(t,c,i,o,s,r,l)}_getSpriteToCtx2DSync(t,e,n,i,o=0,s=0,r=this.wh,l=this.wh){const c=this.getCanvas(`${t}-${e}`);if(c instanceof Promise)return 0;if(!c||!i)return!1;const a=n*this.wh,u=a%c.width,h=(a/c.width|0)*this.wh;return i.drawImage(c,u,h,this.wh,this.wh,o,s,r,l),!0}async _getSpriteToCtx2D(t,e,n,i,o=0,s=0,r=this.wh,l=this.wh){const c=await this.getCanvas(`${t}-${e}`);if(!c||!i)return!1;const a=n*this.wh,u=a%c.width,h=(a/c.width|0)*this.wh;return i.drawImage(c,u,h,this.wh,this.wh,o,s,r,l),!0}async _getSprite(t,e,n,i=0,o=0,s=this.wh,r=this.wh){const l=await this.getCanvas(e);if(!l)return;const c=t*this.wh,a=c%l.width,u=(c/l.width|0)*this.wh;n||((n=se.createElement("canvas")).width=this.wh,n.height=this.wh);const h=n.getContext("2d");return h?(h.drawImage(l,a,u,this.wh,this.wh,i,o,s,r),n):void 0}getCanvas(t){if(this.cacheSectionMap.has(t))return this.cacheSectionMap.get(t);const e=this._getCanvas(t);return this.cacheSectionMap.set(t,e),e.then(e=>this.cacheSectionMap.set(t,e)),e}async _getCanvas(t){const e=`${this.path}.${t}.${this.ext}`;return await this.loadCanvas(e)}async loadCanvas(t){return new Promise((e,n)=>{const i=new Image;i.onerror=n,i.onload=()=>{const t=se.createElement("canvas");t.width=i.width,t.height=i.height;t.getContext("2d").drawImage(i,0,0),e(t)},i.src=oe(t)})}}const le={UpperItem:0,LowerItem:1,GauntletItem:2,ShoeItem:3,HelmetItem:4,ShieldItem:5,WeaponItem:6,CloakItem:7,RingItem:8,AmuletItem:9,BulletItem:10,MaketoolItem:11,BagItem:12,PotionItem:13,FaceItem:14,ForceItem:15,BatteryItem:16,OreItem:17,ResourceItem:18,UnitKeyItem:19,BootyItem:20,MapItem:21,TOWNItem:22,BattleDungeonItem:23,AnimusItem:24,GuardTowerItem:25,TrapItem:26,SiegeKitItem:27,TicketItem:28,EventItem:29,RecoveryItem:30,BoxItem:31,FIRECRACKER:32,UNmannedminer:33,RadarItem:34,NPCLinkItem:35,CouponItem:36},ce={FaceItem:0,UpperItem:1,LowerItem:2,GauntletItem:3,ShoeItem:4,HelmetItem:5,WeaponItem:6,ShieldItem:7,CloakItem:8,RingItem:9,AmuletItem:10,BulletItem:11,MaketoolItem:12,PotionItem:13,BagItem:14,BatteryItem:15,OreItem:16,ResourceItem:17,ForceItem:18,UnitKeyItem:19,BootyItem:20,MapItem:21,TOWNItem:22,BattleDungeonItem:23,AnimusItem:24,GuardTowerItem:25,TrapItem:26,SiegeKitItem:27,TicketItem:28,EventItem:29,RecoveryItem:30,BoxItem:31,FIRECRACKER:32,UNmannedminer:33,RadarItem:34,NPCLinkItem:35,CouponItem:36,UnitHead:37,UnitUpper:38,UnitLower:39,UnitArms:40,UnitShoulder:41,UnitBack:42,UnitBullet:43},ae=new Map(Object.keys(le).map(t=>[le[t],ce[t]])),ue=new Map(Object.keys(le).map(t=>[le[t],t])),he=new Map(Object.keys(ce).map(t=>[ce[t],t]));var de={SVTB:le,CLTB:ce,svCodeToName:t=>ue.get(t),clCodeToName:t=>he.get(t),svToClCode:t=>{if(Number.isInteger(t))return ae.get(0|t)}};const fe={[de.CLTB.HelmetItem]:14,[de.CLTB.UpperItem]:15,[de.CLTB.LowerItem]:16,[de.CLTB.GauntletItem]:17,[de.CLTB.ShoeItem]:18,[de.CLTB.WeaponItem]:1,[de.CLTB.ShieldItem]:19,[de.CLTB.CloakItem]:20,[de.CLTB.RingItem]:20,[de.CLTB.AmuletItem]:20,[de.CLTB.BulletItem]:5,[de.CLTB.MaketoolItem]:10,[de.CLTB.PotionItem]:6,[de.CLTB.BagItem]:7,[de.CLTB.BatteryItem]:11,[de.CLTB.ResourceItem]:9,[de.CLTB.ForceItem]:4,[de.CLTB.UnitKeyItem]:12,[de.CLTB.BootyItem]:13,[de.CLTB.MapItem]:21,[de.CLTB.TOWNItem]:22,[de.CLTB.BattleDungeonItem]:23,[de.CLTB.AnimusItem]:25,[de.CLTB.GuardTowerItem]:26,[de.CLTB.TrapItem]:30,[de.CLTB.SiegeKitItem]:31,[de.CLTB.TicketItem]:32,[de.CLTB.RecoveryItem]:6,[de.CLTB.BoxItem]:6,[de.CLTB.UNmannedminer]:34,[de.CLTB.RadarItem]:35,[de.CLTB.NPCLinkItem]:36,[de.CLTB.CouponItem]:37},me=new Map(Object.entries(fe).map(t=>[0|t[0],0|t[1]]));var pe=t=>{if(Number.isInteger(t))return me.get(0|t)};function ge(t){return(983040&t)>>16}function we(t){return(65280&t)>>8}function $e(t){const e=t;let n=!1;switch(ge(e)){case 0:{const t=[13,13,14,15,16,17,19,18,19,19],i=we(e);if(i>9)return!1;n=t[i]}break;case 1:n=0;break;case 2:{const t=we(e);n=3==t||4==t?4:5}break;case 3:{const t=[7,8,12,8,9,6,10,11,11,11,11,20,21,22,25],i=we(e);if(i>14)return!1;n=t[i]}break;case 4:n=we(e)>5?23:3}return n}globalThis._GetItemType=ge,globalThis._GetItemExtType=we,globalThis.GetSpriteInfo=$e;const ve=new class{constructor(t="ru-ru",e="rfdata/DataTable"){this.url=oe(`${e}/${t}/itemNDItem.json`),this.table=null,this.load()}async load(){this.table||(this.table=fetch(this.url).then(t=>t.json())),this.table=await this.table}getItem(t,e){try{return this.table[t][e]}catch(t){}}}("ru-ru"),be=new class{constructor(t="ru-ru",e="rfdata/DataTable"){this.url=oe(`${e}/${t}/NDLanguage.json`),this.table=null,this.load()}async load(){this.table||(this.table=fetch(this.url).then(t=>t.json())),this.table=await this.table}getString(t){try{return this.table[t]}catch(t){}}}("ru-ru"),Ie=new class{constructor(t,...e){this.itemDT=t,this.spriteMng=new re(...e)}_parse(t,e){const n=this.itemDT.getItem(t,e);if(n){let e=function(t,e,n){if(t===de.CLTB.SiegeKitItem)return 31;if(t===de.CLTB.RadarItem)return 35;if(t>=de.CLTB.UnitHead)return!1;let i=$e(n.texture);return i=!1!==i?i+1:pe(t),i}(t,0,n);if(Number.isInteger(e))return{spriteIndex:n.spriteIndex,spriteGroupIndex:e-1}}return{spriteIndex:0,spriteGroupIndex:0}}getSpriteToCtx2DSync(t,e,n,i,o,s,r){const l=this._parse(t,e);return this.spriteMng.getSpriteToCtx2DSync(n,i,o,s,r,l.spriteIndex,l.spriteGroupIndex)}async getSpriteToCtx2D(t,e,n,i,o,s,r){const l=this._parse(t,e);return await this.spriteMng.getSpriteToCtx2D(n,i,o,s,r,l.spriteIndex,l.spriteGroupIndex)}async getSpriteToCanvasEx(t,e,n,i,o,s,r){const l=await this._parse(s,r);return await this.spriteMng.getSpriteToCanvasEx(t,e,n,i,o,l.spriteIndex,l.spriteGroupIndex)}async getSpriteToCanvas(t,e,n){const i=await this._parse(e,n);return await this.spriteMng.getSpriteToCanvas(t,i.spriteIndex,i.spriteGroupIndex)}async getSprite(t,e){const n=await this._parse(t,e);return await this.spriteMng.getSprite(n.spriteIndex,n.spriteGroupIndex)}}(ve,"rfdata/SpriteImage/common/item.spr");globalThis.devRFOItemDT=ve,globalThis.devRFONDLanguageDT=be,globalThis.devRFOItemSpriteMng=Ie;function ye(t){let e,n,i;const o=t[8].default,s=h(o,t,t[7],null);return{c(){e=_("div"),s&&s.c(),A(e,"class","container svelte-1qj9064"),A(e,"style",n="\r\n\t\t\tvisibility: "+(t[2]?"visible":"hidden")+";\r\n\t\t\tleft: "+t[3]+"px;\r\n\t\t\ttop : "+t[4]+"px;\r\n\t\t")},m(n,o){x(n,e,o),s&&s.m(e,null),t[9](e),i=!0},p(t,r){s&&s.p&&128&r&&f(s,o,t,t[7],r,null,null),(!i||28&r&&n!==(n="\r\n\t\t\tvisibility: "+(t[2]?"visible":"hidden")+";\r\n\t\t\tleft: "+t[3]+"px;\r\n\t\t\ttop : "+t[4]+"px;\r\n\t\t"))&&A(e,"style",n)},i(t){i||(pt(s,t),i=!0)},o(t){gt(s,t),i=!1},d(n){n&&C(e),s&&s.d(n),t[9](null)}}}function xe(t){let e,n,i=t[1]&&ye(t);return{c(){i&&i.c(),e=D()},m(t,o){i&&i.m(t,o),x(t,e,o),n=!0},p(t,[n]){t[1]?i?(i.p(t,n),2&n&&pt(i,1)):(i=ye(t),i.c(),pt(i,1),i.m(e.parentNode,e)):i&&(ft(),gt(i,1,1,()=>{i=null}),mt())},i(t){n||(pt(i),n=!0)},o(t){gt(i),n=!1},d(t){i&&i.d(t),t&&C(e)}}}function Ce(t,e,n){let i,{$$slots:o={},$$scope:s}=e,r=!1,l=!1,c=0,a=0,{target:u=null}=e;return t.$$set=t=>{"target"in t&&n(5,u=t.target),"$$scope"in t&&n(7,s=t.$$scope)},[i,r,l,c,a,u,async t=>{let e;const o=u||t;try{e=o.getBoundingClientRect()}catch{try{e=o.target.getBoundingClientRect()}catch{return}}if(n(2,l=!1),n(1,r=!0),await nt(),!i)return;const s=i.getBoundingClientRect();n(3,c=e.x),n(4,a=e.y+e.height+5),a+s.height>window.innerHeight&&n(4,a=e.y-s.height-5),c+s.width>window.innerWidth&&n(3,c=window.innerWidth-s.width),n(2,l=!0),window.addEventListener("mousedown",()=>{n(1,r=!1),n(2,l=!1)},{once:!0})},s,o,function(t){V[t?"unshift":"push"](()=>{i=t,n(0,i)})}]}class Te extends kt{constructor(t){super(),Lt(this,t,Ce,xe,l,{target:5,fShow:6})}get fShow(){return this.$$.ctx[6]}}function _e(t){const e=t-1;return e*e*e+1}function Se(t){return"[object Date]"===Object.prototype.toString.call(t)}function Le(t,e){if(t===e||t!=t)return()=>t;const n=typeof t;if(n!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const n=e.map((e,n)=>Le(t[n],e));return t=>n.map(e=>e(t))}if("object"===n){if(!t||!e)throw new Error("Object cannot be null");if(Se(t)&&Se(e)){t=t.getTime();const n=(e=e.getTime())-t;return e=>new Date(t+e*n)}const n=Object.keys(e),i={};return n.forEach(n=>{i[n]=Le(t[n],e[n])}),t=>{const e={};return n.forEach(n=>{e[n]=i[n](t)}),e}}if("number"===n){const n=e-t;return e=>t+e*n}throw new Error(`Cannot interpolate ${n} values`)}const ke=new class{constructor(){this.se=new Bt,this.clientX=0,this.clientY=0,this.event=void 0,this.se.on(window,"mousemove",this.setEvent.bind(this)),this.se.on(window,"mousedown",this.setEvent.bind(this))}setEvent(t){this.event=t,this.clientX=t.clientX,this.clientY=t.clientY}close(){this.se.offAll()}};function De(e){let n,i,o,r,l,c;return{c(){n=_("div"),i=_("div"),A(i,"class","thumb svelte-cdfrt1"),A(i,"style",o="\r\n\t\t\tdisplay  : "+(e[3]>e[2]?"block":"none")+";\r\n\t\t\twidth    : "+e[1]+"px;\r\n\t\t\theight   : "+e[4]+"px;\r\n\t\t\ttransform: translate3d(0px, "+e[5](e[0])+"px, 0);\r\n\t\t"),A(n,"class","track svelte-cdfrt1"),A(n,"style",r="\r\n\t\twidth : "+e[1]+"px;\r\n\t\theight: "+e[2]+"px;\r\n\t")},m(t,o){x(t,n,o),y(n,i),l||(c=[M(i,"mousedown",B(e[6])),M(n,"mousedown",B(e[7]))],l=!0)},p(t,[e]){31&e&&o!==(o="\r\n\t\t\tdisplay  : "+(t[3]>t[2]?"block":"none")+";\r\n\t\t\twidth    : "+t[1]+"px;\r\n\t\t\theight   : "+t[4]+"px;\r\n\t\t\ttransform: translate3d(0px, "+t[5](t[0])+"px, 0);\r\n\t\t")&&A(i,"style",o),6&e&&r!==(r="\r\n\t\twidth : "+t[1]+"px;\r\n\t\theight: "+t[2]+"px;\r\n\t")&&A(n,"style",r)},i:t,o:t,d(t){t&&C(n),l=!1,s(c)}}}function Me(t,e,n){const i=new Bt(K);let{trackWidth:o=10}=e,{thumbMinHeight:s=20}=e,{containerHeight:r=200}=e,{contentHeight:l=2100}=e,{scrollTop:c=0}=e,{scrollTopIn:a=0}=e,{scrollShow:u=!1}=e;const h=new z;let d=20,f=20;const m=()=>c/(l-r)*(r-f),p=t=>n(0,c=Math.round(Math.max(0,Math.min(l-r,t))));let g=0;function w(t){const e=(t.clientY+g)/(r-f);p(e*(l-r))}function $(){i.offAll(),h("mousethumbstop")}return t.$$set=t=>{"trackWidth"in t&&n(1,o=t.trackWidth),"thumbMinHeight"in t&&n(9,s=t.thumbMinHeight),"containerHeight"in t&&n(2,r=t.containerHeight),"contentHeight"in t&&n(3,l=t.contentHeight),"scrollTop"in t&&n(0,c=t.scrollTop),"scrollTopIn"in t&&n(10,a=t.scrollTopIn),"scrollShow"in t&&n(8,u=t.scrollShow)},t.$$.update=()=>{1024&t.$$.dirty&&n(0,c=a),797&t.$$.dirty&&(n(8,u=l>r),u?(n(0,c=Math.round(Math.max(0,Math.min(l-r,c)))),n(4,f=Math.max(s,r/l*r)),d=f/r*l|0):(n(0,c=0),n(4,f=r)))},[c,o,r,l,f,m,function(t){1===t.which&&(i.on(window,"mousemove",w).on(window,"mouseup",$),g=m()-t.clientY,w(t),h("mousethumbstart"))},function(t){1===t.which&&(t.offsetY>m()+f/2?p(c+d):p(c-d))},u,s,a]}class Be extends kt{constructor(t){super(),Lt(this,t,Me,De,l,{trackWidth:1,thumbMinHeight:9,containerHeight:2,contentHeight:3,scrollTop:0,scrollTopIn:10,scrollShow:8})}}const Ae=Mt(null),Ee=Mt(null),Ne={ResourceItem:(t,e)=>{const n=[];return n.push([be.getString(880),be.getString(48)]),n.push([be.getString(896),""+t.amount]),n.push([be.getString(933),be.getString(e.canTrade?886:887)]),n},BootyItem:(t,e)=>{const n=[];return n.push([be.getString(880),be.getString(49)]),n.push([be.getString(896),""+t.amount]),n.push([be.getString(933),be.getString(e.canTrade?886:887)]),n}};const{window:He}=vt;function Re(t){let e,n,i,o,r,l,c,a,u;function h(e){t[22].call(null,e)}let d={containerHeight:t[5],contentHeight:t[4]};return void 0!==t[2]&&(d.scrollTop=t[2]),r=new Be({props:d}),V.push(()=>Ct(r,"scrollTop",h)),r.$on("mousethumbstart",Fe),r.$on("mousethumbstop",t[7]),{c(){e=_("div"),n=_("canvas"),o=k(),Tt(r.$$.fragment),A(n,"style",i=" width : "+t[0]+"px; height: "+t[1]+"px; "),A(n,"width",t[0]),A(n,"height",t[1]),A(e,"class","container svelte-3laoqp")},m(i,s){x(i,e,s),y(e,n),t[21](n),y(e,o),_t(r,e,null),c=!0,a||(u=[M(He,"mousemove",t[10]),M(n,"click",t[9]),M(n,"__mouseup",t[9]),M(e,"wheel",t[8])],a=!0)},p(t,e){(!c||3&e[0]&&i!==(i=" width : "+t[0]+"px; height: "+t[1]+"px; "))&&A(n,"style",i),(!c||1&e[0])&&A(n,"width",t[0]),(!c||2&e[0])&&A(n,"height",t[1]);const o={};32&e[0]&&(o.containerHeight=t[5]),16&e[0]&&(o.contentHeight=t[4]),!l&&4&e[0]&&(l=!0,o.scrollTop=t[2],ot(()=>l=!1)),r.$set(o)},i(t){c||(pt(r.$$.fragment,t),c=!0)},o(t){gt(r.$$.fragment,t),c=!1},d(n){n&&C(e),t[21](null),St(r),a=!1,s(u)}}}function Fe(){}function Oe(t,i,o){let s,r;u(t,Ae,t=>o(36,r=t));const l=z(),c=new Bt(K);let h,d,{bagItemArray:f=[]}=i,{biWCount:m=10}=i,{biHCount:g=15}=i,{isDAD:$=!1}=i,{indexDAD:v=-1}=i,{selectIndexDAD:b=-1}=i,{show:y=!0}=i,x=0,C=39*m,T=36*g,_=T,S=0,L=function(t,i={}){const o=Mt(t);let s,r=t;function l(l,c){if(null==t)return o.set(t=l),Promise.resolve();r=l;let a=s,u=!1,{delay:h=0,duration:d=400,easing:f=e,interpolate:m=Le}=n(n({},i),c);if(0===d)return a&&(a.abort(),a=null),o.set(t=r),Promise.resolve();const p=w()+h;let g;return s=I(e=>{if(e<p)return!0;u||(g=m(t,l),"function"==typeof d&&(d=d(t,l)),u=!0),a&&(a.abort(),a=null);const n=e-p;return n>d?(o.set(t=l),!1):(o.set(t=g(f(n/d))),!0)}),s.promise}return{set:l,update:(e,n)=>l(e(r,t),n),subscribe:o.subscribe}}(0,{duration:100});u(t,L,t=>o(20,s=t));let k=!0;globalThis.bagItemArray=f;c.createChild();const D=t=>t>=0&&t<f.length;globalThis.setScrollTop=t=>o(2,S=t);let M=null,B=-1;let A=-1,E=-1,N=0;let H=-1;function R(t=-1){o(11,b=t),H!==t&&(t=(t=>D(t)?t:-1)(t),H=t)}function F(t){let e,n,i=-1;if(!h)return i;if(!y)return i;const{top:o,left:s,width:r,height:l}=h.getBoundingClientRect();if(t.clientX<s||t.clientX>s+r||t.clientY<o||t.clientY>o+l)return i;e=t.clientX-s,n=t.clientY-o+a(L);const c=e/39|0,u=n/36|0;do{if(c<0||c>=m)break;if(e<39*c+2||e>39*(c+1)-3)break;if(n<36*u+1||n>36*(u+1)-1)break;i=u*m+c,i>=f.length&&(i=-1)}while(0);return i}let O=[],W=[],P=[];function j(t,e,n){const i=d;e+=2,n+=1;let o=0;const s=()=>{k||i.clearRect(e,n,34,34)};if(t>=f.length)return s(),i.fillStyle="rgba(103, 50, 50, 0.5)",i.fillStyle="rgba(100, 100, 100, 0.3)",i.fillRect(e+.5,n+.5,33,33),o;const r=f[t];return W[t]||k?(W[t]=!1,s(),!P[t]&&r&&0===Ie.getSpriteToCtx2DSync(r.itemTableCodeCL,r.itemIndexCL,i,e+1,n+1,32,32)&&(o=1),i.strokeStyle="#1F1F1D",i.strokeStyle="rgba(31, 31, 29, 0.7)",i.strokeRect(e+.5,n+.5,33,33),i.strokeStyle="#676965",i.strokeStyle="rgba(103, 105, 101, 0.5)",i.strokeRect(e+1.5,n+1.5,31,31),!P[t]&&r&&r.amount>1&&(i.fillStyle="#FFF",i.strokeText(r.amount,e,n+36-5),i.fillText(r.amount,e,n+36-5)),O[t]&&(i.fillStyle="rgba(142, 142, 79, 0.6)",i.fillRect(e+.5,n+.5,33,33)),o):o}return K(At((function(){const t=d;if(!t)return;t.font='5px "Lucida Console", Monaco, monospace;',t.font="10px serif, monospace",t.strokeStyle="#000",t.fillStyle="#FFF",t.lineWidth=1,k&&t.clearRect(0,0,C,T);let e=0,n=m,i=Math.max(Math.ceil(f.length/n),g);const o=Math.round(a(L));for(let t=0;t<i;t++){let i=36*t;if(i-=o,!(i<-36)){if(i>_+36)break;for(let o=0;o<n;o++){e|=j(t*m+o,39*o,i)}}}return k=e,e}))),Y(async()=>{globalThis.elemCanvas=h,d=h.getContext("2d"),window.elemCtx=d}),t.$$set=t=>{"bagItemArray"in t&&o(12,f=t.bagItemArray),"biWCount"in t&&o(13,m=t.biWCount),"biHCount"in t&&o(14,g=t.biHCount),"isDAD"in t&&o(15,$=t.isDAD),"indexDAD"in t&&o(16,v=t.indexDAD),"selectIndexDAD"in t&&o(11,b=t.selectIndexDAD),"show"in t&&o(17,y=t.show)},t.$$.update=()=>{var e;12288&t.$$.dirty[0]&&(o(4,x=36*Math.ceil(f.length/m)),k=!0),24579&t.$$.dirty[0]&&(o(0,C=39*m),o(1,T=36*g),o(5,_=T),k=!0),4&t.$$.dirty[0]&&p(L,s=S,s),1048576&t.$$.dirty[0]&&(k=!0,R(F(ke))),4096&t.$$.dirty[0]&&(k=!0),296960&t.$$.dirty[0]&&(D(A)&&(O[A]=!1,W[A]=!0),D(b)&&$&&(O[b]=!0,W[b]=!0),o(18,A=b),e=$?-1:b,null!==M&&clearTimeout(M),B!==e&&p(Ae,r=null,r),M=setTimeout(()=>{M=null,p(Ae,r=D(e)?f[e]:null,r),B=e},500)),589824&t.$$.dirty[0]&&(D(E)&&(P[E]=!1,W[E]=!0),D(v)&&(P[v]=!0,W[v]=!0),o(19,E=v)),69632&t.$$.dirty[0]&&Ee.set(D(v)?f[v]:null)},[C,T,S,h,x,_,L,function(){o(2,S=36*Math.round(S/36))},function(t){t.preventDefault(),t.stopPropagation(),o(2,S+=t.deltaY>0?36:-36)},function(t){const e=Date.now();e-N<10||(N=e,1!==t.which||t.ctrlKey||t.altKey||t.shiftKey?1===t.which&&t.shiftKey&&l("use",{item:f[b]}):l("dad",{index:b}))},function(t){R(F(t))},b,f,m,g,$,v,y,A,E,s,function(t){V[t?"unshift":"push"](()=>{h=t,o(3,h)})},function(t){S=t,o(2,S)}]}class We extends kt{constructor(t){super(),Lt(this,t,Oe,Re,l,{bagItemArray:12,biWCount:13,biHCount:14,isDAD:15,indexDAD:16,selectIndexDAD:11,show:17},[-1,-1])}}function Pe(t,e,n){const i=t.slice();return i[88]=e[n],i}function je(t){let e,n,i,o,s,r,l,c,a;return{c(){e=_("span"),e.textContent="Склад",n=L(' - это отдельный инвентарь "банк", в который вещи подают в момент лутания.\r\n\t\t\t'),i=_("br"),o=L("\r\n\t\t\tЧто бы перенести вещи из склада в инвентарь, нажмите "),s=_("span"),s.textContent="SHIFT + левая кнопка мыши.",r=k(),l=_("br"),c=L("\r\n\t\t\tЧто бы перенести вещи из инвенторя в склад, просто "),a=_("span"),a.textContent="выкинте их и слутайте.",H(e,"color","#0f0"),A(e,"class","svelte-ucs67v"),A(i,"class","svelte-ucs67v"),H(s,"color","#0f0"),A(s,"class","svelte-ucs67v"),A(l,"class","svelte-ucs67v"),H(a,"color","#0f0"),A(a,"class","svelte-ucs67v")},m(t,u){x(t,e,u),x(t,n,u),x(t,i,u),x(t,o,u),x(t,s,u),x(t,r,u),x(t,l,u),x(t,c,u),x(t,a,u)},d(t){t&&C(e),t&&C(n),t&&C(i),t&&C(o),t&&C(s),t&&C(r),t&&C(l),t&&C(c),t&&C(a)}}}function Ue(t){let e,n,i,o,s,r=t[2].title+"";return{c(){e=_("div"),n=_("div"),i=L(r),A(n,"class","bag_select_group_item_title svelte-ucs67v"),A(e,"class","bag_select_group_item svelte-ucs67v")},m(r,l){x(r,e,l),y(e,n),y(n,i),o||(s=M(e,"click",t[52]),o=!0)},p(t,e){4&e[0]&&r!==(r=t[2].title+"")&&E(i,r)},d(t){t&&C(e),o=!1,s()}}}function qe(t){let e,n=t[26],i=[];for(let e=0;e<n.length;e+=1)i[e]=Ge(Pe(t,n,e));return{c(){e=_("div");for(let t=0;t<i.length;t+=1)i[t].c();A(e,"class","bag_select_group_item_list svelte-ucs67v")},m(t,n){x(t,e,n);for(let t=0;t<i.length;t+=1)i[t].m(e,null)},p(t,o){if(201326596&o[0]){let s;for(n=t[26],s=0;s<n.length;s+=1){const r=Pe(t,n,s);i[s]?i[s].p(r,o):(i[s]=Ge(r),i[s].c(),i[s].m(e,null))}for(;s<i.length;s+=1)i[s].d(1);i.length=n.length}},d(t){t&&C(e),T(i,t)}}}function Ge(t){let e,n,i,o,s,r,l=t[88].title+"";function c(){return t[51](t[88])}return{c(){e=_("div"),n=_("div"),i=L(l),o=k(),A(n,"class","bag_select_group_item_title svelte-ucs67v"),A(e,"class","bag_select_group_item svelte-ucs67v"),R(e,"bag_select_group_item_active",t[88]===t[2])},m(t,l){x(t,e,l),y(e,n),y(n,i),y(e,o),s||(r=M(e,"mousedown",c),s=!0)},p(n,i){t=n,67108868&i[0]&&R(e,"bag_select_group_item_active",t[88]===t[2])},d(t){t&&C(e),s=!1,r()}}}function Ye(t){let e,n;return e=new ne({}),{c(){Tt(e.$$.fragment)},m(t,i){_t(e,t,i),n=!0},i(t){n||(pt(e.$$.fragment,t),n=!0)},o(t){gt(e.$$.fragment,t),n=!1},d(t){St(e,t)}}}function Ke(t){let e,n;return e=new Qt({}),{c(){Tt(e.$$.fragment)},m(t,i){_t(e,t,i),n=!0},i(t){n||(pt(e.$$.fragment,t),n=!0)},o(t){gt(e.$$.fragment,t),n=!1},d(t){St(e,t)}}}function ze(e){let n,i,o,l,c,a,u,h,d,f,m,p,g,w,$,v,b,I,T,S,D,B,F,O,W,P,j,U,q,G,Y,K,z,X,J,Q,Z;function tt(t){e[47].call(null,t)}function et(t){e[48].call(null,t)}let nt={$$slots:{default:[je]},$$scope:{ctx:e}};function it(t,e){return t[15]?qe:Ue}void 0!==e[9]&&(nt.fShow=e[9]),void 0!==e[8]&&(nt.target=e[8]),a=new Te({props:nt}),V.push(()=>Ct(a,"fShow",tt)),V.push(()=>Ct(a,"target",et)),T=new zt({});let st=it(e),rt=st(e);const lt=[Ke,Ye],ct=[];function at(t,e){return t[5]?1:0}function ut(t){e[55].call(null,t)}function ht(t){e[56].call(null,t)}O=at(e),W=ct[O]=lt[O](e);let dt={bagItemArray:e[20],biWCount:e[6],biHCount:e[7],show:!e[5]};return void 0!==e[1]&&(dt.isDAD=e[1]),void 0!==e[0]&&(dt.indexDAD=e[0]),U=new We({props:dt}),V.push(()=>Ct(U,"isDAD",ut)),V.push(()=>Ct(U,"indexDAD",ht)),U.$on("dad",e[31]),U.$on("use",e[57]),{c(){n=_("div"),i=_("div"),o=_("img"),c=k(),Tt(a.$$.fragment),d=k(),f=_("div"),m=L(e[14]),p=k(),g=_("div"),w=_("div"),$=_("input"),b=k(),I=_("div"),Tt(T.$$.fragment),S=k(),D=_("div"),rt.c(),B=k(),F=_("div"),W.c(),P=k(),j=_("div"),Tt(U.$$.fragment),Y=k(),K=_("div"),z=k(),X=_("div"),o.src!==(l="assets/ui/question-mark.png")&&A(o,"src","assets/ui/question-mark.png"),A(o,"draggable","false"),H(o,"position","absolute"),H(o,"top","2px"),H(o,"left","16px"),A(o,"class","btn-question-mark svelte-ucs67v"),A(f,"class","inv_label canMove svelte-ucs67v"),A($,"class","inp_filter svelte-ucs67v"),A($,"type","text"),A(I,"class","iconClose svelte-ucs67v"),R(I,"iconCloseHide",!e[3].length),A(w,"class","containerFilter svelte-ucs67v"),A(D,"class","bag_select_group svelte-ucs67v"),A(g,"class","container2 canMove svelte-ucs67v"),A(F,"class","inv_show_btn iconBagShowHide iconHover svelte-ucs67v"),A(i,"class","header canMove svelte-ucs67v"),A(j,"class","bagContent canMove svelte-ucs67v"),A(K,"class","btn_resize svelte-ucs67v"),H(K,"left",e[18]-10+"px"),H(K,"top",e[19]-10+"px"),A(X,"class","resize_window svelte-ucs67v"),H(X,"display",e[4]?"block":"none"),H(X,"width",e[18]+"px"),H(X,"height",e[19]+"px"),A(n,"class","bag canMove svelte-ucs67v"),H(n,"top",e[22]+"px"),H(n,"left",e[21]+"px"),H(n,"width",e[16]+"px"),H(n,"height",e[17]+"px"),R(n,"bagHide",e[5]),R(n,"bagShow",e[13])},m(s,l){var u;x(s,n,l),y(n,i),y(i,o),e[46](o),y(i,c),_t(a,i,null),y(i,d),y(i,f),y(f,m),y(i,p),y(i,g),y(g,w),y(w,$),N($,e[3]),y(w,b),y(w,I),_t(T,I,null),y(g,S),y(g,D),rt.m(D,null),y(i,B),y(i,F),ct[O].m(F,null),e[54](i),y(n,P),y(n,j),_t(U,j,null),e[58](j),y(n,Y),y(n,K),y(n,z),y(n,X),e[59](n),J=!0,Q||(Z=[M(o,"click",(function(){r(e[9])&&e[9].apply(this,arguments)})),M($,"input",e[49]),(u=v=Ht.call(null,$),u&&r(u.destroy)?u.destroy:t),M(I,"click",e[50]),M(F,"click",e[53]),M(K,"mousedown",e[33]),M(K,"mouseup",e[32]),M(n,"mousedown",e[30])],Q=!0)},p(t,i){e=t;const o={};536870912&i[2]&&(o.$$scope={dirty:i,ctx:e}),!u&&512&i[0]&&(u=!0,o.fShow=e[9],ot(()=>u=!1)),!h&&256&i[0]&&(h=!0,o.target=e[8],ot(()=>h=!1)),a.$set(o),(!J||16384&i[0])&&E(m,e[14]),8&i[0]&&$.value!==e[3]&&N($,e[3]),8&i[0]&&R(I,"iconCloseHide",!e[3].length),st===(st=it(e))&&rt?rt.p(e,i):(rt.d(1),rt=st(e),rt&&(rt.c(),rt.m(D,null)));let s=O;O=at(e),O!==s&&(ft(),gt(ct[s],1,1,()=>{ct[s]=null}),mt(),W=ct[O],W?W.p(e,i):(W=ct[O]=lt[O](e),W.c()),pt(W,1),W.m(F,null));const r={};1048576&i[0]&&(r.bagItemArray=e[20]),64&i[0]&&(r.biWCount=e[6]),128&i[0]&&(r.biHCount=e[7]),32&i[0]&&(r.show=!e[5]),!q&&2&i[0]&&(q=!0,r.isDAD=e[1],ot(()=>q=!1)),!G&&1&i[0]&&(G=!0,r.indexDAD=e[0],ot(()=>G=!1)),U.$set(r),(!J||262144&i[0])&&H(K,"left",e[18]-10+"px"),(!J||524288&i[0])&&H(K,"top",e[19]-10+"px"),(!J||16&i[0])&&H(X,"display",e[4]?"block":"none"),(!J||262144&i[0])&&H(X,"width",e[18]+"px"),(!J||524288&i[0])&&H(X,"height",e[19]+"px"),(!J||4194304&i[0])&&H(n,"top",e[22]+"px"),(!J||2097152&i[0])&&H(n,"left",e[21]+"px"),(!J||65536&i[0])&&H(n,"width",e[16]+"px"),(!J||131072&i[0])&&H(n,"height",e[17]+"px"),32&i[0]&&R(n,"bagHide",e[5]),8192&i[0]&&R(n,"bagShow",e[13])},i(t){J||(pt(a.$$.fragment,t),pt(T.$$.fragment,t),pt(W),pt(U.$$.fragment,t),J=!0)},o(t){gt(a.$$.fragment,t),gt(T.$$.fragment,t),gt(W),gt(U.$$.fragment,t),J=!1},d(t){t&&C(n),e[46](null),St(a),St(T),rt.d(),ct[O].d(),e[54](null),St(U),e[58](null),e[59](null),Q=!1,s(Z)}}}function Xe(t,e,n){let i,o,s,r,l,{inventoryID:c="_default_"}=e,{storageDir:h="./rfex/storage/inventory/"}=e;const d=(t,e)=>((t="./storage/",e=[],n)=>{Array.isArray(e)||(e=[e]);const i=t+"/"+e.map(Wt).join("/")+".json",o=new Ft(i);if(Ot.has(i))return Ot.get(i);const s={value:void 0},r=t=>{const e=JSON.stringify(t);s.valueJSON!==e&&(s.valueJSON=e,s.value=t,o.set(e))};let l=(()=>{if(s.valueJSON)return s.value;try{const t=o.get();s.value=JSON.parse(t),s.valueJSON=t}catch(t){}return s.value})();void 0===l&&r(l=n);const c=Mt(l);return c.subscribe(r),Ot.set(i,c),c})(h,[c,...[t].flat(1e9)],e);class f{constructor(t,e,n){this.id=t,this.title=e,this.filter=n,this.wrBagItemsPosition=d(["bagSlotPosition",t],[]),this.bagItemPositions=a(this.wrBagItemsPosition),Array.isArray(this.bagItemPositions)||(this.bagItemPositions=[]),this.wrBagItemsPosition.set(this.bagItemPositions)}}let m=d("bagGridWidth",5);u(t,m,t=>n(6,r=t));let g=d("bagGridHeight",5);u(t,g,t=>n(7,l=t));let w,$,v,b,I,{minItemWidthCount:y=5}=e,{maxItemWidthCount:x=40}=e,{minItemHeightCount:C=4}=e,{maxItemHeightCount:T=20}=e,{indexDAD:_=-1}=e,{isDAD:S=!1}=e,L=d("bagHide",!1);u(t,L,t=>n(5,i=t));let k=!1;const D=new ResizeObserver(()=>{Z(o,s)});Y(()=>D.observe(v)),K(()=>D.disconnect()),Y(()=>{globalThis.g_RectMng&&g_RectMng.set(v,v)}),K(()=>{globalThis.g_RectMng&&g_RectMng.del(v)});let M="",B=new f(-1,"",t=>!1),A=[],E="",N="",H=!1;function R(t){if(!H)return n(15,H=!0),window.addEventListener("mousedown",()=>{n(15,H=!1),console.log("...bagFilterSelectProcess")},{once:!0}),void console.log({bagFilterSelectProcess:H});n(2,B=t),n(15,H=!1),console.log({bagFilterSelectProcess:H})}M="Склад",A.push(new f(0,""+be.getString(1646),t=>!0)),A.push(new f(1,`${be.getString(1188)}/${be.getString(1189)}`,t=>t.itemTableCodeCL>=de.CLTB.UpperItem&&t.itemTableCodeCL<=de.CLTB.ShieldItem)),A.push(new f(2,`${be.getString(48)}/${be.getString(49)}`,t=>t.itemTableCodeCL===de.CLTB.ResourceItem||t.itemTableCodeCL===de.CLTB.BootyItem)),A.push(new f(3,""+be.getString(46),t=>t.itemTableCodeCL===de.CLTB.PotionItem)),B=A[0];let F=d("bagPositionX",100);u(t,F,t=>n(21,o=t));let O=d("bagPositionY",100);u(t,O,t=>n(22,s=t));let W=0,P=0,j=0,U=0,q=!1,G=0,z=0;const X=new Bt(K);let{items:J=new Map}=e,Q=[];function Z(t,e){if(!v)return;const n=v.getBoundingClientRect();t+n.width>=window.innerWidth&&(t=window.innerWidth-n.width-1),e+n.height>=window.innerHeight&&(e=window.innerHeight-n.height-1),t<0&&(t=0),e<0&&(e=0),p(F,o=t,o),p(O,s=e,s)}const tt=X.createChild();const et=X.createChild();let nt,it,ot=0,st=0;function rt(t){ot+=t.movementX,st+=t.movementY,p(m,r=nt+Math.floor(ot/39),r),p(g,l=it+Math.floor(st/36),l),n(18,j+=t.movementX),n(19,U+=t.movementY)}function lt(){n(4,q=!1),et.offAll()}let{minNumSlots:ct=100}=e;function at(){console.time("setItemList"),function(){const t=t=>{if(!t)return!1;if(N.length){if(void 0===t._nameLow){t._nameLow="";const e=ve.getItem(t.itemTableCodeCL,t.itemIndexCL);e&&(t._nameLow=e.name.toLowerCase())}if(-1===t._nameLow.indexOf(N))return!1}return!0},e=Array(ct).fill(),i=ut.filter(t=>!!t&&!!B.filter(t)),o=B.bagItemPositions;{let t;for(t=o.length-1;t>=0&&!o[t];t--);o.splice(t+1)}const s=new Map(i.map(t=>[t.id,t]));for(let t=0;t<o.length;t++){const n=o[t],i=e[t]=s.get(n);s.delete(n),i||(o[t]=void 0)}{let t=0;for(const n of s.values()){for(;t<e.length&&e[t];t++);e[t]=n,o[t]=n.id}}{let t;for(t=e.length-1;t>=ct&&!e[t];t--);e.splice(t+1)}if(B.wrBagItemsPosition.set(o),N.length)return void n(20,Q=e.filter(t));n(20,Q=e)}(),console.timeEnd("setItemList")}let ut;return t.$$set=t=>{"inventoryID"in t&&n(34,c=t.inventoryID),"storageDir"in t&&n(35,h=t.storageDir),"minItemWidthCount"in t&&n(36,y=t.minItemWidthCount),"maxItemWidthCount"in t&&n(37,x=t.maxItemWidthCount),"minItemHeightCount"in t&&n(38,C=t.minItemHeightCount),"maxItemHeightCount"in t&&n(39,T=t.maxItemHeightCount),"indexDAD"in t&&n(0,_=t.indexDAD),"isDAD"in t&&n(1,S=t.isDAD),"items"in t&&n(40,J=t.items),"minNumSlots"in t&&n(41,ct=t.minNumSlots)},t.$$.update=()=>{if(32&t.$$.dirty[0]&&(i||(n(13,k=!0),setTimeout(()=>n(13,k=!1),200))),8&t.$$.dirty[0]&&n(42,N=E.trim().toLowerCase()),512&t.$$.dirty[1]&&n(45,ut=[...J.values()]),4&t.$$.dirty[0]|2048&t.$$.dirty[1]&&(n(0,_=-1),n(1,S=!1)),192&t.$$.dirty[0]|12768&t.$$.dirty[1])for(;;)if(p(m,r=Math.max(y,Math.min(x,r)),r),p(g,l=Math.max(C,Math.min(T,l)),l),n(43,G=39*r-5+32),n(44,z=36*l-2+0),n(16,W=G+0+0),n(17,P=z+40+20),z+80>window.innerHeight&&l>C)p(g,l--,l);else{if(!(G>window.innerWidth&&r>y))break;p(m,r--,r)}16&t.$$.dirty[0]&&(n(18,j=W),n(19,U=P)),4&t.$$.dirty[0]|19456&t.$$.dirty[1]&&at()},[_,S,B,E,q,i,r,l,w,$,v,b,I,k,"Склад",H,W,P,j,U,Q,o,s,m,g,L,A,R,F,O,function(t){if(!t.target.classList.contains("canMove"))return;let e=o,n=s;tt.on(window,"mousemove",t=>{e+=t.movementX,n+=t.movementY,Z(e,n)}).on(window,"mouseup",t=>tt.offAll()).on(window,"blur",t=>tt.offAll())},function({detail:t}){const{index:e}=t;if(-1===_)Q[e]&&!N.length&&-1!==e&&(n(0,_=e),n(1,S=!0));else{const[t,i]=[_,e];if(n(0,_=-1),n(1,S=!1),Q[t]&&-1!==i){const e=B.bagItemPositions;e[i]=Q[t].id,e[t]=Q[i]?Q[i].id:"fill-no-item",n(2,B)}}},lt,function(t){if(1===t.which&&!t.ctrlKey&&!t.altKey&&!t.shiftKey)return ot=0,st=0,nt=r,it=l,n(4,q=!0),void et.on(window,"mousemove",rt).on(window,"mouseup",lt).on(window,"blur",lt)},c,h,y,x,C,T,J,ct,N,G,z,ut,function(t){V[t?"unshift":"push"](()=>{w=t,n(8,w)})},function(t){$=t,n(9,$)},function(t){w=t,n(8,w)},function(){E=this.value,n(3,E)},()=>n(3,E=""),t=>R(t),()=>R(),()=>p(L,i=!i,i),function(t){V[t?"unshift":"push"](()=>{I=t,n(12,I)})},function(t){S=t,n(1,S)},function(t){_=t,n(0,_)},function(e){!function(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(t=>t(e))}(t,e)},function(t){V[t?"unshift":"push"](()=>{b=t,n(11,b)})},function(t){V[t?"unshift":"push"](()=>{v=t,n(10,v)})}]}class Ve extends kt{constructor(t){super(),Lt(this,t,Xe,ze,l,{inventoryID:34,storageDir:35,minItemWidthCount:36,maxItemWidthCount:37,minItemHeightCount:38,maxItemHeightCount:39,indexDAD:0,isDAD:1,items:40,minNumSlots:41},[-1,-1,-1])}}const Je=new class{constructor(){this.se=new Bt,this.clientX=0,this.clientY=0,this.event=void 0,this.se.on(window,"mousemove",this.setEvent.bind(this)),this.se.on(window,"mousedown",this.setEvent.bind(this))}setEvent(t){this.event=t,this.clientX=t.clientX,this.clientY=t.clientY}close(){this.se.offAll()}};function Qe(t,e,n){const i=t.slice();return i[18]=e[n],i}function Ze(t){let e,n,i,o,s,r,l,c=t[18][0]+"",a=t[18][1]+"";return{c(){e=_("tr"),n=_("td"),i=L(c),o=k(),s=_("td"),r=L(a),l=k(),A(n,"class","text metaKeyTextColor svelte-107q4o2"),A(s,"class","text svelte-107q4o2"),A(e,"class","svelte-107q4o2")},m(t,c){x(t,e,c),y(e,n),y(n,i),y(e,o),y(e,s),y(s,r),y(e,l)},p(t,e){128&e&&c!==(c=t[18][0]+"")&&E(i,c),128&e&&a!==(a=t[18][1]+"")&&E(r,a)},d(t){t&&C(e)}}}function tn(e){let n,i,o,s,r,l,c,a,u,h,d,f,m,p,g,w,$,v,b,I,S=e[7],D=[];for(let t=0;t<S.length;t+=1)D[t]=Ze(Qe(e,S,t));return{c(){n=_("div"),i=_("div"),o=k(),s=_("div"),r=_("div"),l=_("canvas"),c=k(),a=_("div"),u=L("["),h=L(e[5]),d=L("]"),f=k(),m=_("table");for(let t=0;t<D.length;t+=1)D[t].c();p=k(),g=_("div"),w=_("div"),w.textContent="[Описание]",$=k(),v=_("div"),b=L(e[6]),A(i,"class","item_border svelte-107q4o2"),A(l,"width","64"),A(l,"height","64"),A(l,"class","sprite_canvas svelte-107q4o2"),A(r,"class","sprite_border svelte-107q4o2"),A(s,"class","sprite_container svelte-107q4o2"),A(a,"class","title text svelte-107q4o2"),A(m,"class","svelte-107q4o2"),A(w,"class","description_label text metaKeyTextColor svelte-107q4o2"),A(v,"class","description_text svelte-107q4o2"),A(g,"class","description svelte-107q4o2"),A(n,"class","item_container svelte-107q4o2"),A(n,"style",I=(e[0]?"":"display: none;")+" left: "+e[3]+"px; top: "+e[4]+"px;")},m(t,I){x(t,n,I),y(n,i),y(n,o),y(n,s),y(s,r),y(r,l),e[9](l),y(n,c),y(n,a),y(a,u),y(a,h),y(a,d),y(n,f),y(n,m);for(let t=0;t<D.length;t+=1)D[t].m(m,null);y(n,p),y(n,g),y(g,w),y(g,$),y(g,v),y(v,b),e[10](n)},p(t,[e]){if(32&e&&E(h,t[5]),128&e){let n;for(S=t[7],n=0;n<S.length;n+=1){const i=Qe(t,S,n);D[n]?D[n].p(i,e):(D[n]=Ze(i),D[n].c(),D[n].m(m,null))}for(;n<D.length;n+=1)D[n].d(1);D.length=S.length}64&e&&E(b,t[6]),25&e&&I!==(I=(t[0]?"":"display: none;")+" left: "+t[3]+"px; top: "+t[4]+"px;")&&A(n,"style",I)},i:t,o:t,d(t){t&&C(n),e[9](null),T(D,t),e[10](null)}}}function en(t,e,n){let i,o,s=0,r=0,{state:l={isDAD:!1,getSrc(){}}}=e,c=!1,a="Рецепт Освященный Панцирь [47",u="Рецепт + 99 Бим + 90 Красной Стружки + 24 Полированных Кристалов + 5 Частей Доспехов Ренегатов. 100% Шанс",h=[];K(Ae.subscribe(m));const d=[14,0,1,2,3,4,6,5,7,8,9,10,11,13,12,16,17,18,15,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,0,0,0,0,0,0,0,0,0,0,0];function f(){if(!i)return;const t=i.getBoundingClientRect();n(3,s=Je.clientX+5),n(4,r=Je.clientY+10),r+t.height>window.innerHeight&&n(4,r=window.innerHeight-t.height),s+t.width>window.innerWidth&&n(3,s-=t.width)}function m(t){if(n(5,a=""),n(6,u=""),n(7,h=[]),!t)return void n(0,c=!1);n(0,c=!0);const e=ve.getItem(t.itemTableCodeCL,t.itemIndexCL);e&&(n(5,a=e.name),n(6,u=e.description),o&&(console.log(o),o.getContext("2d").clearRect(0,0,64,64),Ie.getSpriteToCanvas(o,t.itemTableCodeCL,t.itemIndexCL)),n(7,h=function(t,e){const n=Ne[de.clCodeToName(t.itemTableCodeCL)];return n?n(t,e):null}(t,e))),h&&h.length||n(7,h=[[be.getString(896),t.amount]]),nt().then(f),globalThis.g_Flag_SHOW_TOOLTIP_ITEM_VIEW_META_INFO&&(h.push(["clcode",t.itemTableCodeCL+":"+t.itemIndexCL]),h.push(["svcode",d[t.itemTableCodeCL]+":"+t.itemIndexCL]),e&&h.push(["sprite",e.spriteIndex]))}globalThis.viewItemSet=function(t){n(7,h=t)},globalThis.viewItemSetItem=t=>Ae.set(t),globalThis.viewItem=m;const p=new Bt(K);function g(){f()}return t.$$set=t=>{"state"in t&&n(8,l=t.state)},t.$$.update=()=>{1&t.$$.dirty&&(c?p.on(window,"mousemove",g):p.offAll())},[c,i,o,s,r,a,u,h,l,function(t){V[t?"unshift":"push"](()=>{o=t,n(2,o)})},function(t){V[t?"unshift":"push"](()=>{i=t,n(1,i)})}]}class nn extends kt{constructor(t){super(),Lt(this,t,en,tn,l,{state:8})}}function on(e){let n;return{c(){n=_("canvas"),H(n,"display",e[0]?"block":"none"),H(n,"transform","translate3d("+e[2]+"px, "+e[3]+"px, 0)"),A(n,"width","68"),A(n,"height","68"),A(n,"class","svelte-gwswr7")},m(t,i){x(t,n,i),e[4](n)},p(t,[e]){1&e&&H(n,"display",t[0]?"block":"none"),12&e&&H(n,"transform","translate3d("+t[2]+"px, "+t[3]+"px, 0)")},i:t,o:t,d(t){t&&C(n),e[4](null)}}}function sn(t,e,n){const i=new Bt(K);let o,s,r=null;Y(()=>{s=o.getContext("2d")});let l=0,c=0;function a(t){n(2,l=t.clientX-34),n(3,c=t.clientY-34)}return K(At((function(){r&&s&&(s.clearRect(0,0,68,68),Ie.getSpriteToCtx2DSync(r.itemTableCodeCL,r.itemIndexCL,s,2,2,64,64),r.amount>1&&(s.font="20px serif, monospace",s.fillStyle="#FFF",s.strokeStyle="#000",s.strokeText(r.amount,0,59),s.fillText(r.amount,0,59)))}))),K(Ee.subscribe((function(t){n(0,r=t||null)}))),t.$$.update=()=>{1&t.$$.dirty&&(r?(a(Je),i.on(window,"mousemove",a)):i.offAll())},[r,o,l,c,function(t){V[t?"unshift":"push"](()=>{o=t,n(1,o)})}]}class rn extends kt{constructor(t){super(),Lt(this,t,sn,on,l,{})}}function ln(t,{delay:e=0,duration:n=400,easing:i=_e}){const o=getComputedStyle(t),s=+o.opacity,r=parseFloat(o.height),l=parseFloat(o.paddingTop),c=parseFloat(o.paddingBottom),a=parseFloat(o.marginTop),u=parseFloat(o.marginBottom),h=parseFloat(o.borderTopWidth),d=parseFloat(o.borderBottomWidth);return{delay:e,duration:n,easing:i,css:t=>`overflow: hidden;opacity: ${Math.min(20*t,1)*s};height: ${t*r}px;padding-top: ${t*l}px;padding-bottom: ${t*c}px;margin-top: ${t*a}px;margin-bottom: ${t*u}px;border-top-width: ${t*h}px;border-bottom-width: ${t*d}px;`}}function cn(t,e,n){const i=t.slice();return i[4]=e[n],i}function an(t,e){let n,i,o,s,r,l=e[4].text+"";return{key:t,first:null,c(){n=_("div"),i=L(l),A(n,"class",o="message "+e[4].type+" svelte-c7pvza"),this.first=n},m(t,e){x(t,n,e),y(n,i),r=!0},p(t,e){(!r||1&e)&&l!==(l=t[4].text+"")&&E(i,l),(!r||1&e&&o!==(o="message "+t[4].type+" svelte-c7pvza"))&&A(n,"class",o)},i(t){r||(it(()=>{s||(s=$t(n,ln,{},!0)),s.run(1)}),r=!0)},o(t){s||(s=$t(n,ln,{},!1)),s.run(0),r=!1},d(t){t&&C(n),t&&s&&s.end()}}}function un(t){let e,n,i=[],o=new Map,s=t[0];const r=t=>t[4].id;for(let e=0;e<s.length;e+=1){let n=cn(t,s,e),l=r(n);o.set(l,i[e]=an(l,n))}return{c(){e=_("div");for(let t=0;t<i.length;t+=1)i[t].c();A(e,"class","container svelte-c7pvza")},m(t,o){x(t,e,o);for(let t=0;t<i.length;t+=1)i[t].m(e,null);n=!0},p(t,[n]){if(1&n){const s=t[0];ft(),i=It(i,n,r,1,t,s,o,e,bt,an,null,cn),mt()}},i(t){if(!n){for(let t=0;t<s.length;t+=1)pt(i[t]);n=!0}},o(t){for(let t=0;t<i.length;t+=1)gt(i[t]);n=!1},d(t){t&&C(e);for(let t=0;t<i.length;t+=1)i[t].d()}}}function hn(t,e,n){let i=[],o=1;function s(t,e){const s={type:t,text:e,time:Date.now(),id:o++};i.push(s),n(0,i),setTimeout(()=>n(0,i=i.filter(t=>t!==s)),5e3)}return[i,{error(t){s("error",t)},warning(t){s("warning",t)},info(t){s("info",t)},success(t){s("success",t)},add:s}]}class dn extends kt{constructor(t){super(),Lt(this,t,hn,un,l,{notify:1})}get notify(){return this.$$.ctx[1]}}var fn=function(t=!0,e=!0){var n=0,i=document.createElement("div");function o(t){return i.appendChild(t.dom),t}function s(t){for(var e=0;e<i.children.length;e++)i.children[e].style.display=e===t?"block":"none";n=t}i.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",i.addEventListener("click",(function(t){t.preventDefault(),s(++n%i.children.length)}),!1);var r,l=(performance||Date).now(),c=l,a=0,u=o(new fn.Panel("FPS","#0ff","#002")),h=t?o(new fn.Panel("MS","#0f0","#020")):null;return e&&self.performance&&self.performance.memory&&(r=o(new fn.Panel("MB","#f08","#201"))),s(0),{REVISION:16,dom:i,addPanel:o,showPanel:s,begin:function(){l=(performance||Date).now()},end:function(){a++;var t=(performance||Date).now();if(h&&h.update(t-l,200),t>=c+1e3&&(u.update(1e3*a/(t-c),100),c=t,a=0,r)){var e=performance.memory;r.update(e.usedJSHeapSize/1048576,e.jsHeapSizeLimit/1048576)}return t},update:function(){l=this.end()},domElement:i,setMode:s}};function mn(t,e,n){let i,{show:o=!1}=e;const s=()=>globalThis.g_MainEventsBus||{on(){}};function r(){i&&i.update()}function l(){i&&(i.dom.parentNode.removeChild(i.dom),s().off("cguiscreen_draw",r),i=null)}return K(l),t.$$set=t=>{"show"in t&&n(0,o=t.show)},t.$$.update=()=>{1&t.$$.dirty&&(o?i||(i=new fn(!1,!1),i.dom.style.top="10px",i.dom.style.left="240px",document.body.appendChild(i.dom),s().on("cguiscreen_draw",r)):l())},[o]}fn.Panel=function(t,e,n){var i=1/0,o=0,s=Math.round,r=s(window.devicePixelRatio||1),l=80*r,c=48*r,a=3*r,u=2*r,h=3*r,d=15*r,f=74*r,m=30*r,p=document.createElement("canvas");p.width=l,p.height=c,p.style.cssText="width:80px;height:48px";var g=p.getContext("2d");return g.font="bold "+9*r+"px Helvetica,Arial,sans-serif",g.textBaseline="top",g.fillStyle=n,g.fillRect(0,0,l,c),g.fillStyle=e,g.fillText(t,a,u),g.fillRect(h,d,f,m),g.fillStyle=n,g.globalAlpha=.9,g.fillRect(h,d,f,m),{dom:p,update:function(c,w){i=Math.min(i,c),o=Math.max(o,c),g.fillStyle=n,g.globalAlpha=1,g.fillRect(0,0,l,d),g.fillStyle=e,g.fillText(s(c)+" "+t+" ("+s(i)+"-"+s(o)+")",a,u),g.drawImage(p,h+r,d,f-r,m,h,d,f-r,m),g.fillRect(h+f-r,d,r,m),g.fillStyle=n,g.globalAlpha=.9,g.fillRect(h+f-r,d,r,s((1-c/w)*m))}}};class pn extends kt{constructor(t){super(),Lt(this,t,mn,null,l,{show:0})}}const{Map:gn}=vt;function wn(t,e,n){const i=t.slice();return i[16]=e[n],i}function $n(t,e,n){const i=t.slice();return i[6]=e[n],i}function vn(e){let n,i,o,s=e[21].message+"";return{c(){n=L("Error: '"),i=L(s),o=L("'")},m(t,e){x(t,n,e),x(t,i,e),x(t,o,e)},p:t,i:t,o:t,d(t){t&&C(n),t&&C(i),t&&C(o)}}}function bn(t){let e,n,i,o,s,r,l=[],c=new gn;e=new nn({}),i=new rn({});let a=[t[6]];const u=t=>t[6];for(let e=0;e<1;e+=1){let n=$n(t,a,e),i=u(n);c.set(i,l[e]=In(i,n))}return{c(){Tt(e.$$.fragment),n=k(),Tt(i.$$.fragment),o=k();for(let t=0;t<1;t+=1)l[t].c();s=D()},m(t,c){_t(e,t,c),x(t,n,c),_t(i,t,c),x(t,o,c);for(let e=0;e<1;e+=1)l[e].m(t,c);x(t,s,c),r=!0},p(t,e){if(92&e){const n=[t[6]];ft(),l=It(l,e,u,1,t,n,c,s.parentNode,bt,In,s,$n),mt()}},i(t){if(!r){pt(e.$$.fragment,t),pt(i.$$.fragment,t);for(let t=0;t<1;t+=1)pt(l[t]);r=!0}},o(t){gt(e.$$.fragment,t),gt(i.$$.fragment,t);for(let t=0;t<1;t+=1)gt(l[t]);r=!1},d(t){St(e,t),t&&C(n),St(i,t),t&&C(o);for(let e=0;e<1;e+=1)l[e].d(t);t&&C(s)}}}function In(t,e){let n,i,o;return i=new Ve({props:{inventoryID:e[6],items:e[2],minNumSlots:e[3],minItemWidthCount:e[4]}}),i.$on("use",e[8]),{key:t,first:null,c(){n=D(),Tt(i.$$.fragment),this.first=n},m(t,e){x(t,n,e),_t(i,t,e),o=!0},p(t,e){const n={};64&e&&(n.inventoryID=t[6]),4&e&&(n.items=t[2]),8&e&&(n.minNumSlots=t[3]),16&e&&(n.minItemWidthCount=t[4]),i.$set(n)},i(t){o||(pt(i.$$.fragment,t),o=!0)},o(t){gt(i.$$.fragment,t),o=!1},d(t){t&&C(n),St(i,t)}}}function yn(e){let n;return{c(){n=L("Loading...")},m(t,e){x(t,n,e)},p:t,i:t,o:t,d(t){t&&C(n)}}}function xn(t){let e,n,i=t[16]+"";return{c(){e=_("div"),n=L(i)},m(t,i){x(t,e,i),y(e,n)},p(t,e){2&e&&i!==(i=t[16]+"")&&E(n,i)},d(t){t&&C(e)}}}function Cn(t){let e,n,i,o,s,r,l,c,a,u,h={ctx:t,current:null,token:null,hasCatch:!0,pending:yn,then:bn,catch:vn,error:21,blocks:[,,,]};!function(t,e){const n=e.token={};function i(t,i,o,s){if(e.token!==n)return;e.resolved=s;let r=e.ctx;void 0!==o&&(r=r.slice(),r[o]=s);const l=t&&(e.current=t)(r);let c=!1;e.block&&(e.blocks?e.blocks.forEach((t,n)=>{n!==i&&t&&(ft(),gt(t,1,1,()=>{e.blocks[n]=null}),mt())}):e.block.d(1),l.c(),pt(l,1),l.m(e.mount(),e.anchor),c=!0),e.block=l,e.blocks&&(e.blocks[i]=l),c&&lt()}if((o=t)&&"object"==typeof o&&"function"==typeof o.then){const n=G();if(t.then(t=>{q(n),i(e.then,1,e.value,t),q(null)},t=>{if(q(n),i(e.catch,2,e.error,t),q(null),!e.hasCatch)throw t}),e.current!==e.pending)return i(e.pending,0),!0}else{if(e.current!==e.then)return i(e.then,1,e.value,t),!0;e.resolved=t}var o}(n=t[7](),h);let d=t[1],f=[];for(let e=0;e<d.length;e+=1)f[e]=xn(wn(t,d,e));function m(e){t[9].call(null,e)}let p={};return void 0!==t[0]&&(p.notify=t[0]),r=new dn({props:p}),V.push(()=>Ct(r,"notify",m)),a=new pn({props:{show:t[5]}}),{c(){e=_("main"),h.block.c(),i=k(),o=_("div");for(let t=0;t<f.length;t+=1)f[t].c();s=k(),Tt(r.$$.fragment),c=k(),Tt(a.$$.fragment),H(o,"display","flex"),H(o,"flex-direction","column"),H(o,"background","#fff")},m(t,n){x(t,e,n),h.block.m(e,h.anchor=null),h.mount=()=>e,h.anchor=i,y(e,i),y(e,o);for(let t=0;t<f.length;t+=1)f[t].m(o,null);y(e,s),_t(r,e,null),y(e,c),_t(a,e,null),u=!0},p(e,[n]){{const i=(t=e).slice();i[21]=h.resolved,h.block.p(i,n)}if(2&n){let e;for(d=t[1],e=0;e<d.length;e+=1){const i=wn(t,d,e);f[e]?f[e].p(i,n):(f[e]=xn(i),f[e].c(),f[e].m(o,null))}for(;e<f.length;e+=1)f[e].d(1);f.length=d.length}const i={};!l&&1&n&&(l=!0,i.notify=t[0],ot(()=>l=!1)),r.$set(i);const s={};32&n&&(s.show=t[5]),a.$set(s)},i(t){u||(pt(h.block),pt(r.$$.fragment,t),pt(a.$$.fragment,t),u=!0)},o(t){for(let t=0;t<3;t+=1){gt(h.blocks[t])}gt(r.$$.fragment,t),gt(a.$$.fragment,t),u=!1},d(t){t&&C(e),h.block.d(),h.token=null,h=null,T(f,t),St(r),St(a)}}}function Tn(t,e,n){globalThis.showList=[];let i=[];setInterval(()=>n(1,i=globalThis.showList),1e3);let o,s="",r=new Map,l=100;const c=[14,0,1,2,3,4,6,5,7,8,9,10,11,13,12,16,17,18,15,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,0,0,0,0,0,0,0,0,0,0,0];let a;globalThis.g_Inventory={init(t,e){this.setID(t),this.setNumSlots(e),this.clear()},clear(){r.clear(),n(2,r)},setID(t){n(6,s=t)},setNumSlots(t){n(3,l=t)},setItem(t){r.set(t.id,t),t.amount||r.delete(t.id),n(2,r)},setItemList(t){t.map(this.setItem.bind(this))},updateItem(t){const e=r.get(t.id);e&&(Object.assign(e,t),this.setItem(e))},_use(t){this.onuse&&this.onuse(t.item)},addForTest(t=1e9){o.filter(t=>!r.has(t.id)).slice(0,t).map(this.setItem.bind(this))},fillForTest(t=1e9,e){this.clear(),o.slice(0,t).filter(t=>void 0===e||e.has(t.itemTableCodeCL)).map(this.setItem.bind(this))},fillForTestTClCode(t){this.clear(),o.filter(e=>void 0===t||t.has(e.itemTableCodeCL)).map(this.setItem.bind(this))},fillForTestTSvCode(t){this.clear(),o.filter(e=>void 0===t||t.has(c[e.itemTableCodeCL])).map(this.setItem.bind(this))}};let u=5,h=!1;window.addEventListener("keydown",t=>{9===t.which&&t.preventDefault()});return t.$$.update=()=>{1&t.$$.dirty&&(globalThis.g_Notify=a)},globalThis.bagItemArray=[],[a,i,r,l,u,h,s,async function(){await(async()=>{await ve.load(),await be.load()})(),o=ve.table.map((t,e)=>t.map((t,n)=>{if(!t.spriteIndex)return;const i=e,o=n;if(0===ve.getItem(i,o).spriteIndex)return;const s=i|o<<16;return{item:{id:s,itemTableCodeCL:i,itemIndexCL:o,amount:100*Math.random()|0},id:s,itemTableCodeCL:i,itemIndexCL:o,amount:100*Math.random()|0,showSprite:!0,showDAD:!1,needUpdate:!0}})).flat(1e9).filter(Boolean),globalThis.g_AllItems=o,globalThis.g_Flag_SHOW_TOOLTIP_ITEM_VIEW_META_INFO=!1,globalThis.g_BAG_MIN_ITEM_WIDTH_COUNT=5,globalThis.g_Flag_SHOW_FPS=!1,function(t){const e=Object.entries(t).map(t=>t);let n="";document.addEventListener("keypress",i=>{n+=i.key.toLowerCase(),n.length>20&&(n=n.slice(-10));const o=e.find(t=>{const e=n.lastIndexOf(t[0]);return-1!==e&&e===n.length-t[0].length});o&&o[1].call(t)})}({catdev(){g_Flag_SHOW_TOOLTIP_ITEM_VIEW_META_INFO^=1,g_Notify.info("Catdev: "+!!g_Flag_SHOW_TOOLTIP_ITEM_VIEW_META_INFO)},invw3dev(){g_BAG_MIN_ITEM_WIDTH_COUNT=5==g_BAG_MIN_ITEM_WIDTH_COUNT?3:5,n(4,u=g_BAG_MIN_ITEM_WIDTH_COUNT),g_Notify.info("BagMinItemWidthCount: "+g_BAG_MIN_ITEM_WIDTH_COUNT)},fpsdev(){n(5,h^=1),g_Notify.info("Show fps: "+!!h)}}),g_Inventory.fillForTest(5),setTimeout(()=>{try{main()}catch{}},0)},({detail:t})=>g_Inventory._use(t),function(t){a=t,n(0,a)}]}return new class extends kt{constructor(t){super(),Lt(this,t,Tn,Cn,l,{})}}({target:document.body,props:{}})}();
